var Scroller=new function(){this.scroller=null,this.offsetX,this.offsetY,this.targetX=0,this.targetY=0,this.targetYTmp=0;var t,e,n,i,a,s,r,o=!1,c=0,h=0,l=0,M=0,d=0,S=0,u=0,g=0,B=0,b=3e-14,v=0,p=0,f=0,j=0,m=0,O=0,x=!1,w=!1,_=0,Y=0,C=0,T=!1,A=this,E="A",P=Modernizr.csstransforms3d;this.init=function(t,e,n){this.scroller=t,a=e,s=n?"touch":"mouse",Y=this.scroller.clientHeight,_=this.scroller.clientWidth,this.addEventHandlers(s),$(this.scroller).bind(this._dragStartEvt,this._dragStartCB),this.setElementTransform(this.scroller,"1px","0px"),this.animate()},this.changeOrientation=function(t){Y=this.scroller.clientHeight,_=this.scroller.clientWidth},this.PreventSelection=function(t){t.preventDefault()},this.OnMouseLost=function(t){this.OnMouseUp(t)},this.OnMouseDown=function(n,a,s){TweenLite.killTweensOf(Scroller),r=null,n.target.nodeName===E&&(r=n.target),c=a,h=s,j=0,m=0,p=0,f=0,i=(new Date).getTime(),t=S,e=u,o=!0,T=!1,this.enableTracking(),n.preventDefault()},this.OnMouseMove=function(s,r,l){if(o){var M=(new Date).getTime(),d=r,g=l,B=d-c,b=g-h;if(c=d,h=g,i=M,"y"==a){u-=u>0&&u<Y-browser_height?b:b/3;var v=u-e;e=u;var j=Math.abs(v);f+=.3*(j-f),n=v<0?-1:1}else{S-=S>0&&S<_-browser_width?B:B/3;var m=S-t;t=S;var x=Math.abs(m);p+=.3*(x-p),O=m<0?-1:1}T=!0}},this.OnMouseUp=function(t){if(o){o=!1,j=Math.abs(p),m=Math.abs(f),x=!0,w=!0;var e=(new Date).getTime(),n=e-i;n=Math.max(10,n),i=0,p*=1-Math.min(1,Math.max(0,n/100)),f*=1-Math.min(1,Math.max(0,n/100))}return c=0,h=0,this.disableTracking(),T||null==r||A.onItemClicked(r),!T&&void 0},this.onItemClicked=function(){},this.getX=function(){return l},this.getY=function(){return M},this.draw=function(){this.update()},this.update=function(){S=this.targetX;var t=.1,e=(S-B)*t;B+=e,l=Math.round(-B),w&&(u+=f*n,f*=.9,u||(u=0),u<C?siteLoaded&&(f=0,u=C,w=!1):u>Y-browser_height&&(f=0,u=Y-browser_height,w=!1),f<.01&&(w=!1,f=0)),g=this.targetY;var t=.1,i=(g-v)*t;v+=i,d=Math.round(-v/30);var t=.6,a=(u-b)*t;b+=a,M=Math.round(-b)+d,this.targetYTmp=u,BMSite.currentScrollY=-M,BMSite.currentScrollYS=BMSite.currentScrollY/BMSite.siteScale,BMSite.currentScrollXS=l/BMSite.siteScale,BMProject.projectOpened&&(BMProject.containerPhotos.x=parseInt(l/15+(browser_width/BMProject.siteScale-795)/2),BMProject.rectangleBg.x=Math.round(l/25)+browser_width/BMProject.siteScale/2,BMProject.rectangleBgMask.x=Math.round(l/15)+browser_width/BMProject.siteScale/2,BMProject.stage.update()),P?(this.setElementTransform(this.scroller,Math.round(l/30)+"px",M+BMSite.siteYAdd+"px"),1==siteVersion&&null!=bgMobiH&&this.setElementTransform(bgMobiH,Math.round(l/30)+"px",.6*M-180+BMSite.siteYAdd+"px"),BMProject.projectOpened&&(this.setElementTransform(projectText,Math.round((browser_width-380)/2+l/25)+"px",parseInt(browser_height/2+170*BMProject.siteScale)+"px"),this.setElementTransform(projectTextD,Math.round((browser_width-380)/2+l/25)+"px",parseInt(browser_height/2+250*BMProject.siteScale)+"px"),this.setElementTransform(containerPages,Math.round((browser_width-800*BMProject.siteScale)/2+l/20)+"px",parseInt(browser_height/2-20*BMProject.siteScale)+"px")),canvasMainBgObj&&canvasMainBgObj.gfx2&&(null!=canvasAnimationObj.shineContainer&&(canvasAnimationObj.shineContainer.y=-BMSite.currentScrollYS+BMSite.siteYAddSpec),null!=canvasShinesObj.shineContainer&&(canvasShinesObj.shineContainer.y=-BMSite.currentScrollYS+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx2&&(canvasMainBgObj.gfx2.y=Math.round((.65*M-201)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx3&&(canvasMainBgObj.gfx3.y=Math.round((.35*M-108)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx4&&(canvasMainBgObj.gfx4.y=Math.round((.5*M-200)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasShinesObj.mask1&&(canvasShinesObj.mask1.y=BMSite.currentScrollYS-BMSite.siteYAddSpec),null!=canvasShinesObj.mask2&&(canvasShinesObj.mask2.y=BMSite.currentScrollYS-BMSite.siteYAddSpec),null!=canvasAnimationObj.shineContainer&&(canvasAnimationObj.shineContainer.x=Math.round((l/30+parseInt((browser_width-BMSite.siteWidthC)/2))/BMSite.siteScale)),null!=canvasShinesObj.shineContainer&&(canvasShinesObj.shineContainer.x=Math.round((l/30+parseInt((browser_width-BMSite.siteWidthC)/2))/BMSite.siteScale)),null!=canvasMainBgObj.gfx2&&(canvasMainBgObj.gfx2.x=Math.round((l/15-153)/BMSite.siteScale)),null!=canvasMainBgObj.gfx3&&(canvasMainBgObj.gfx3.x=Math.round((l/40-153)/BMSite.siteScale)),null!=canvasMainBgObj.gfx4&&(canvasMainBgObj.gfx4.x=Math.round((l/25-154)/BMSite.siteScale)))):(this.set2dTransform(this.scroller,l/30+"px",M+BMSite.siteYAdd+"px"),1==siteVersion&&null!=bgMobiH&&this.set2dTransform(bgMobiH,Math.round(l/30)+"px",.6*M-180+BMSite.siteYAdd+"px"),BMProject.projectOpened&&(this.set2dTransform(projectText,Math.round((browser_width-380)/2+l/25)+"px",parseInt(browser_height/2+170*BMProject.siteScale)+"px"),this.set2dTransform(projectTextD,Math.round((browser_width-380)/2+l/25)+"px",parseInt(browser_height/2+250*BMProject.siteScale)+"px"),this.set2dTransform(containerPages,Math.round((browser_width-800*BMProject.siteScale)/2+l/20)+"px",parseInt(browser_height/2-20*BMProject.siteScale)+"px")),canvasMainBgObj&&canvasMainBgObj.gfx2&&(null!=canvasAnimationObj.shineContainer&&(canvasAnimationObj.shineContainer.y=-BMSite.currentScrollYS+BMSite.siteYAddSpec),null!=canvasShinesObj.shineContainer&&(canvasShinesObj.shineContainer.y=-BMSite.currentScrollYS+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx2&&(canvasMainBgObj.gfx2.y=Math.round((.65*M-201)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx3&&(canvasMainBgObj.gfx3.y=Math.round((.35*M-108)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasMainBgObj.gfx4&&(canvasMainBgObj.gfx4.y=Math.round((.5*M-200)/BMSite.siteScale)+BMSite.siteYAddSpec),null!=canvasShinesObj.mask1&&(canvasShinesObj.mask1.y=-BMSite.currentScrollYS-BMSite.siteYAddSpec),null!=canvasShinesObj.mask2&&(canvasShinesObj.mask2.y=-BMSite.currentScrollYS-BMSite.siteYAddSpec),null!=canvasAnimationObj.shineContainer&&(canvasAnimationObj.shineContainer.x=Math.round((l/30+parseInt((browser_width-BMSite.siteWidthC)/2))/BMSite.siteScale)),null!=canvasShinesObj.shineContainer&&(canvasShinesObj.shineContainer.x=Math.round((l/30+parseInt((browser_width-BMSite.siteWidthC)/2))/BMSite.siteScale)),null!=canvasMainBgObj.gfx2&&(canvasMainBgObj.gfx2.x=Math.round((l/15-153)/BMSite.siteScale)),null!=canvasMainBgObj.gfx3&&(canvasMainBgObj.gfx3.x=Math.round((l/40-153)/BMSite.siteScale)),null!=canvasMainBgObj.gfx4&&(canvasMainBgObj.gfx4.x=Math.round((l/25-154)/BMSite.siteScale)))),updateCanvasElements(),scrollClicked=!1,canvasMainBgObj&&updateStageBG(),this.offsetX=l,this.offsetY=M},this.set2dTransform=function(t,e,n){var i="translate("+e+","+n+")";t.style.transform=i,t.style.WebkitTransform=i,t.style.msTransform=i,t.style.MozTransform=i},this.setElementTransform=function(t,e,n){var i="translate3d("+e+","+n+", 0px)";t.style.transform=i,t.style.WebkitTransform=i},this.animate=function(){Scroller.draw(),requestAnimFrame(Scroller.animate)},this.enableTracking=function(){$(this.scroller).bind(this._dragMoveEvt,this._dragMoveCB),$(this.scroller).bind(this._dragStopEvt,this._dragStopCB)},this.disableTracking=function(){$(this.scroller).unbind(this._dragMoveEvt,this._dragMoveCB),$(this.scroller).unbind(this._dragStopEvt,this._dragStopCB)},this.addEventHandlers=function(t){"mouse"===t?(this._dragStartEvt="mousedown",this._dragStartCB=function(t){return A.OnMouseDown(t,t.clientX,t.clientY)},this._dragMoveEvt="mousemove",this._dragMoveCB=function(t){return A.OnMouseMove(t,t.clientX,t.clientY)},this._dragStopEvt="mouseup",this._dragStopCB=function(t){return A.OnMouseUp(t)},this._dragOutEvt="mouseout",this._dragOutCB=function(t){return A.OnMouseUp(t)},$(window).bind(this._dragOutEvt,this._dragOutCB,!0),$("body").bind(this._dragOutEvt,this._dragOutCB,!0),$("document").bind("mousedown",this.PreventSelection)):(this._dragStartEvt="touchstart",this._dragStartCB=function(t){var e=t.touches[0];return A.OnMouseDown(t,e.pageX,e.pageY)},this._dragMoveEvt="touchmove",this._dragMoveCB=function(t){var e=t.touches[0];return A.OnMouseMove(t,e.pageX,e.pageY)},this._dragStopEvt="touchend",this._dragStopCB=function(t){return A.OnMouseUp(t)})},this.resize=function(){this.scroller&&(Y=this.scroller.clientHeight*BMSite.siteScale+2*BMSite.siteYAdd,_=this.scroller.clientWidth*BMSite.siteScale)},this.targetYUpdate=function(){u=this.targetYTmp},this.targetYUpdateTmp=function(){this.targetYTmp=u}};
//# sourceMappingURL=maps/scroller.min.js.map
